<!DOCTYPE html>
<!-- <html lang="en" xmlns:th="http://www.thymeleaf.org">
 -->
 <html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<!-- Required meta tags -->
<meta charset="utf-8" lang="en" />
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no" />
<title>REMITA | Authorizer detail Page</title>
<!-- plugins:css -->
<link rel="stylesheet"
	href="vendors/iconfonts/simple-line-icon/css/simple-line-icons.css" />
<link rel="stylesheet"
	href="vendors/iconfonts/font-awesome/css/font-awesome.min.css" />
<link rel="stylesheet" href="vendors/css/vendor.bundle.base.css" />
<link rel="stylesheet" href="vendors/css/vendor.bundle.addons.css" />

<link rel="stylesheet" type="text/css" href="font.css" />
<!-- endinject -->
<!-- plugin css for this page -->
<!-- End plugin css for this page -->
<!-- inject:css -->
<link rel="stylesheet" type="text/css" href="css/style.css" />
<!-- endinject -->
<link rel="shortcut icon"
	href="assets/img/faviconbranding.ico" />

<style>
@font-face {
	font-family: FedraSansStdLight;
	src: url(font/FedraSansStd-LightLF.otf);
}

html, body, h1, h2, h3, h4, h5, h6, p {
	font-family: inherit;
	font-weight: 400;
	line-height: 1.71429;
}

body {
	background: #fff;
	color: #6a6d71;
	font-family: 'FedraSansStdLight';
	font-weight: normal;
	color: #000000;
	height: 100%;
}
</style>
</head>

<body>
	<div class="container-scroller">
		<!-- partial:partials/_horizontal-navbar.html -->
		<nav class="navbar horizontal-layout col-lg-12 col-12 p-0">
	           <div class="nav-top flex-grow-1" style="height: 100px; background-color: #000000; height: 110px;">
        <div class="container d-flex flex-row h-100">
          <div class="row">
            <div class="col-lg-10 mx-auto" style="margin-top: 35px;"><h1 style="color: #fff;"> REMITA<span style="color: #000000;">CORONATION MERCHANTMERCHANT BANK</span></h1>
            </div>
            <div class="col-lg-2 mx-auto">
               <a class="navbar-brand brand-logo" href="index.html"><img src="https://mware.coronationmb.com/bidding/img/img-branding/cmb-logo-white.png" alt="logo"/></a>
            </div>
          </div>
        </div>
      </div>
			<div class="nav-bottom" >
				<div class="container">
					<ul class="nav page-navigation" style="color: #000; font-weight: bold;">
							<li class="nav-item"><a href="/payment-portal/remitaAuth" class="nav-link" >Dashboard</a></li>
						    <!--   <li class="nav-item">
				              <a href="#" class="nav-link"><span class="menu-title">Initiate Payment</span><i class="menu-arrow"></i></a>
				              <div class="submenu">
				                <ul class="submenu-item">
				                  <li class="nav-item"><a class="nav-link" href="/payment-portal/homeRemitaNORRR">Payment with RRR</a></li>
				                  <li class="nav-item"><a class="nav-link" href="/payment-portal/homeRemitaRRR">Payment without RRR</a></li>
				                </ul>
				              </div>
				            </li>
							<li class="nav-item"><a href="/payment-portal/bankCode"
							class="nav-link" style="color: #FFF;">Bank Code</a></li> -->
							<li class="nav-item"><a href="#"
							class="nav-link" style="color: #FFF;">Bank Code</a></li>
							<li class="nav-item"><a href="#"
							class="nav-link" style="color: #FFF;">Bank Code</a></li>
							<li class="nav-item"><a href="#"
							class="nav-link" style="color: #FFF;">Bank Code</a></li>
							<li class="nav-item"><a href="#"
							class="nav-link" style="color: #FFF;">Bank Code</a></li>
							<li class="nav-item"><a href="#"
							class="nav-link" style="color: #FFF;">Bank Code</a></li>
					<li class="nav-item"><a href="/payment-portal/homeDashboard"
							class="nav-link" style="color: #000;">Switch Platform </a></li>

							<li class="nav-item"><a href="/payment-portal/logout"
							class="nav-link" style="color: #000;">Logout <i class="icon-power"></i></a></li>

					</ul>
				</div>
			</div>
		</nav>


		<!-- partial -->
			<div class="container-fluid page-body-wrapper"><br/>
			  <div class="main-panel">
			        <div class="content-wrapper">
			        <input type="hidden" name="username" id="username" th:value="${session.username}" />
<!-- 			        			        <div class="row">
	<div class="col-md-6 col-lg-4 grid-margin stretch-card">
		<div class="card bg-primary text-white border-0">
               <div class="card-body">
                 <div class="d-flex flex-row align-items-top">
                   <i class="icon-user"></i>
                   <div class="ml-3">
                     <h6 class="mt-2 text-muted card-text"><span
                 th:text="|Hello ${session.username}|"></span></h6>
                     <p class="mt-2 text-muted card-text"><span
                 th:text="| ${session.userrole}|"></span></p>
                   </div>
                 </div>
         	</div>
		</div>
	</div>
</div> -->
			          <div class="row">
			        <div class="col-md-3 grid-margin stretch-card">
			        </div>
			        <input type="hidden" name="appr" id="appr" th:value="${authrrr.approvalStatus}" />
			        <input type="hidden" name="cmt" id="cmt" th:value="${authrrr.comment}" />
			        <input type="hidden" name="respcode" id="respcode" th:value="${authrrr.responseCode}" />
			        <div class="col-md-6 grid-margin stretch-card">
			          <div class="card">
			           <input type="hidden" name="debittedAcct" id="debittedAcct" th:value="${authrrr.accounttodebit}" />
			          <div th:if="${errorMessage} != null">
									<p style="text-align: center; color: red" th:text="${errorMessage}">
										<font size="4"></font>
									</p>
								</div>

			            <div class="card-body">
			              <h4 class="card-title" style="font-weight: bolder;">Authorizer Detail Page</h4>
			              <hr/>


			              <form name="paynotify" id="paynotify" class="forms-sample" th:action="@{/remitaPayNotify}" method="post">
	                        <div class="modal-body" >
				                  <div class="forms-sample" >
				                    <div class="form-group row">
				                      <label  class="col-sm-5 col-form-label" style="font-weight: bolder;">RRR:</label>
				                      <div class="col-sm-7" id="rrd" > <span name="rrs" id="rrs" th:text="${authrrr.rrr}"></span> </div>
				                    </div>
				                    <div class="form-group row">
				                      <label  class="col-sm-5 col-form-label" style="font-weight: bolder;">Payers Name:</label>
				                      <div class="col-sm-7" id="payername" > <span th:text="${authrrr.payersName}"></span></div>
				                    </div>
				                    <div class="form-group row">
				                      <label  class="col-sm-5 col-form-label" style="font-weight: bolder;">Payers Email:<span style="color: #ff0000;">*</span></label>
				                      <div class="col-sm-7" id="payeremail" > <span th:text="${authrrr.payersEmail}"></span></div>
				                    </div>
				                    <div class="form-group row">
				                      <label  class="col-sm-5 col-form-label" style="font-weight: bolder;">Payers Phone:<span style="color: #ff0000;">*</span></label>
				                      <div class="col-sm-7" > <span th:text="${authrrr.payersPhone}"></span></div>
				                    </div>
				                    <div class="form-group row">
				                      <label  class="col-sm-5 col-form-label" style="font-weight: bolder;">Amount Due:<span style="color: #ff0000;">*</span></label>
				                      <div class="col-sm-7" > <span name="amt" id="amt" th:text="${authrrr.amount}"></span></div>
				                    </div>
				                     <div class="form-group row">
				                      <label  class="col-sm-5 col-form-label" style="font-weight: bolder;">Account to debit:<span style="color: #ff0000;">*</span></label>
				                      <div class="col-sm-7" > <span name="detacct" id="detacct" th:text="${authrrr.accounttodebit}"></span></div>
				                    </div>


				                     <div class="form-group row">
				                      <label  class="col-sm-5 col-form-label" style="font-weight: bolder;">Approval: <span style="color: #ff0000;">*</span></label>
				                      <div class="col-sm-7">
				                        <select class="form-control" name="approval" id="approval">
				                          <option>[-Select Choice-]</option>
				                          <option value="APPROVE">APPROVE</option>
				                          <option value="REJECT">REJECT</option>
				                        </select>
				                      </div>
				                    </div>

				                     <div class="form-group row">
				                      <label  class="col-sm-5 col-form-label" style="font-weight: bolder;">Comment:<span style="color: #ff0000;">*</span></label>
				                      <div class="col-sm-7" > <input type="text" class="form-control" name="comment" id="comment" placeholder="Enter your comment"/></div>
				                    </div>

				                    <div class="form-group row">
				                      <label  class="col-sm-5 col-form-label" style="font-weight: bolder;">Enter your token:<span style="color: #ff0000;">*</span></label>
				                      <div class="col-sm-7" > <input type="text" class="form-control" name="token" id="token" placeholder="Enter your token"/></div>
				                    </div>

				                    <div class="form-group row">
				                      <label  class="col-sm-5 col-form-label" style="font-weight: bolder;"><span name="stat" id="stat" ></span></label>
				                      <div class="col-sm-7" > <span name="statm" id="statm" ></span></div>
				                    </div>

				                    <input type="hidden" name="rr" id="rr" th:value="${authrrr.rrr}" />
				                     <input type="hidden" name="debittedAccount" id="debittedAccount" th:value="${authrrr.accounttodebit}" />
 									<input type="hidden" name="amountDebitted" id="amountDebitted" th:value="${authrrr.amount}" />
 									 <input type="hidden" name="userx" id="userx"  />
				                    </div>
				                <!--  </form>  -->
	                        </div>

	                        <!--   <button type="button" class="btn btn-success">Proceed</button>  -->
	                        <hr/>
	                          <button type="submit" value="submit" name="btnprocess" id="btnprocess"  class="btn btn-success" style="background-color: #000000; color: #fff;">Proceed</button>
	                          <button type="button" class="btn btn-light" data-dismiss="modal"><a href="/payment-portal/remitaAuth"  style="color: #000;">Close</a></button>

	                        </form>
			            </div>

			            </div>

			          </div>
			          <div class="col-md-3 grid-margin stretch-card">
			        </div>

			          </div>


			        </div>
			    </div>
			</div>

        <!-- content-wrapper ends -->
        <!-- partial:partials/_footer.html -->
        <footer class="footer">
          <div class="w-100 clearfix">
          	<center>
          		<span class=" d-block text-center text-sm-left d-sm-inline-block">Copyright © Coronation Merchant Bank. All rights reserved.</span>
          	</center>

          </div>
        </footer>
        <!-- partial -->
      </div>
      <!-- main-panel ends -->

	<!-- container-scroller -->

	<!-- plugins:js -->
	<script src="vendors/js/vendor.bundle.base.js"></script>
	<script src="vendors/js/vendor.bundle.addons.js"></script>
	<!-- endinject -->
	<!-- Plugin js for this page-->
	<!-- End plugin js for this page-->
	<!-- inject:js -->
	<script src="js/template.js"></script>
	<!-- endinject -->
	<!-- Custom js for this page-->
	<script src="js/dashboard.js"></script>
	<script src="js/todolist.js"></script>
	<script src="js/data-table.js"></script>
	<script src="js/modal-demo.js"></script>
	<!-- End custom js for this page-->

		<script type="text/javascript">
		$(document).ready(function() {
			var span = document.getElementById("close");
			var rrno = $('#rrs').text();
			var amtdue = $('#amt').text();
			var usrname = $('#username').val();
			var debacc = $('#debittedAcct').val();
			var appr = $('#appr').val();
			var cmt = $('#cmt').val();
			var respcode = $('#respcode').val();
		//	alert(appr);
		//	alert(cmt);
		//	alert(respcode);

			console.log("rrr==", rrno);
			console.log("amount due==", amtdue);
			console.log("username==", usrname);
			$('#amountDebitted').val(amtdue);
			$('#rr').val(rrno);
			$('#userx').val(usrname);
			$('#debittedAccount').val(debacc);

		
			if(appr == "FULLY_APPROVED" ){
					$("#btnprocess").attr("disabled", true);
					//$('#approval').val(appr);
					$('#comment').val(cmt);
					$("#approval option:contains(APPROVE)").attr('selected', 'selected');
					if(respcode == "00"){
						$('#stat').text("Status:");
						$('#statm').text("SUCCESSFUL");
					}else{
						$('#stat').text("Status :");
						$('#statm').text("FAILED");
					}

			}

			$("#btnprocess").click(function(){
				alert("Submit button clicked");
				$("#btnprocess").attr("disabled", true);
				$("#paynotify").submit();
				
			});

				if( appr == "REJECTED" ){
				$("#btnprocess").attr("disabled", true);
				//$('#approval').val(appr);
				$('#comment').val(cmt);
				$("#approval option:contains(REJECT)").attr('selected', 'selected');

		}



		});
	</script>


</body>


</html>
